<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">
<head>

<title>canistro online, the best deals are always closer than we imagine.</title>

<link href="/bootstrap/bootstrap.min.css" rel="stylesheet">
<link href="/bootstrap/bootstrap-responsive.min.css" rel="stylesheet">

<style>
.github {
    position: absolute;
    top: 0;
    right: 0;
    border: 0;
}
</style>

<script src="/jquery/jquery.js"></script>
<script src="/bootstrap/bootstrap.min.js"></script>
<script src="/jquery/jquery.validate.js"></script>

<script>
$(function () {

    // set jquery validator default values
    $.validator.setDefaults({
        highlight: function(element, errorClass, validClass) {
            validClass = 'success';
            $(element).parents('.control-group').addClass(errorClass).removeClass(validClass);
        },
        unhighlight: function(element, errorClass, validClass) {
            validClass = 'success';
            $(element).parents('.control-group').removeClass(errorClass).addClass(validClass);
        },
        errorPlacement: function (error, element) {
            element.parents('.control-group').find('.help-block').html(error);
        },
        success: function (label) {
            $('#' + label.attr('for')).parents('.control-group').find('.help-block').html('This field is verified');
        },
        errorElement: 'span'
    });

    // add jquery validator regexp method for precise matching
    $.validator.addMethod('regexp', function(value, element, param) {
        return this.optional(element) || value.match(param);
    }, 'This value doesn\'t match the acceptable pattern.');

    // simple method validate form, to config jquery validator
    $.validate_form = function () {
        $('form').validate({
            rules: {
                email: {
                    required: true,
                    email: true,
                    /*
                    remote: {
                        url: '/validation/email',
                        data: {
                            value: function () {
                                return $('#email').val();
                            }
                        }
                    }
                    */
                },
                name: {
                    required: true,
                    minlength: 5,
                    maxlength: 30,
                    regexp: /^([A-Za-z0-9_-]{5,30})$/,
                    /*
                    remote: {
                        url: '/validation/name',
                        data: {
                            value: function () {
                                return $('#name').val();
                            }
                        }
                    }
                    */
                }
            },
            messages: {
                email: {
                    //required: 'Please enter your email here.',
                    email: 'Please enter a valid email here.',
                    remote: 'This email is alredy in use, please login.'
                },
                name: {
                    //required: 'Please enter your canistro\'s name.',
                    minlength: 'Please enter a name with minimum 5 chars.',
                    maxlength: 'Please enter a name with maximum 30 chars.',
                    regexp: 'Please enter only alfa-numeric chars.',
                    remote: 'This name is already in use, please try another one.'
                }
            }
        });
    };

    // method done while clicking to send the form
    $.done = function (e) {
        e.preventDefault();
        $.validate_form();
        $('form').submit();
    };

    // reset form after successful post
    $.reset_form = function () {
        $('form input').val('');
        $('form .success').removeClass('success');
        $('#email').parents('.control-group').find('.help-block').html('enter your email address here');
        $('#name').parents('.control-group').find('.help-block').html('enter your canistro\'s name here');
        $('.alert-success').removeClass('in').addClass('out, hide');
    };

    // submit the form after successful validation
    $.submit = function (e) {
        e.preventDefault();
        //$.post('/create', $('form').serializeArray(), function (data) {
        //    if (data == 'success') {
                $('.alert-success').removeClass('out, hide').addClass('in').alert();
                // TODO reset here or after closing alert and form?
                setTimeout(function () {$.reset_form();}, 5000);
        //    }
        //});
    };

    $.track = function () {
        _gaq.push(['_trackEvent', 'canistro-home', 'try free'])
    };

    $(document).off('click', '#done').on('click', '#done', $.done);
    $(document).off('submit', 'form').on('submit', 'form', $.submit);
    $(document).off('click', '.btn-success').on('click', '.btn-success', $.track);
});
</script>

<script>
    window.google_analytics_uacct = "UA-4145216-7";
    google_analytics_domain_name=".linuxforme.com";
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-4145216-7']);
    _gaq.push(['_setDomainName', '.linuxforme.com']);
    _gaq.push(['_setAllowLinker', true]);
    _gaq.push(['_setAllowHash', false]);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>

<body>

    <div class="navbar">
        <div class="navbar-inner">
            <div class="container">
                <a class="brand" href="/">Canistro</a>

                <ul class="nav">
                    <li class="active"><a href="/index.html">Home</a></li>
                    <li><a href="/about.html">About</a></li>
                    <li><a href="/canistros.html">Browse canistros</a></li>
                    <li><a href="/contact.html">Contact</a></li>
                </ul>

            </div>
        </div>
    </div>

    <div class="container">

        <div class="row">

            <div class="span9">
                <div class="hero-unit">
                    <h1>Canistro</h1>
                    <p>the best deals are always closer than we imagine, canistro will help to find them.</p>
                    <p>
                        <a class="btn btn-success btn-large" data-target="#modal-form" href="#modal-form" data-toggle="modal">Try now for free.</a>
                    </p>
                    <p>
                        With canistro you can easily publish your products and have them avaible worldwide in matter of seconds.
                        Canistro is completely free up until 30 products and you can have as many canistros as you like.
                    </p>

                    <p>
                        We improve canistro based on your feedback, let us know what's next.
                        <img src="/img/social.png" class="pull-right">
                    </p>
                </div>
            </div>

            <div class="span3">
                <h2>Highlight canistro</h2>
                <p>This is the highlight canistro of the month.</p>
                <ul class="thumbnails">
                    <li class="span3">
                    <div class="thumbnail">
                        <a href="/renasboy"><img alt="" src="/renasboy/img/image1.jpg"></a>
                        <div class="caption">
                            <h5>renasboy</h5>
                            <p>This is a test canistro just to make the templates and the system.</p>
                            <p><a class="btn btn-primary pull-right" href="/renasboy">Go Shop</a> <a class="btn" href="/renasboy/contact.html">Contact</a></p>
                        </div>
                    </div>
                    </li>
                </ul>
            </div>
        </div> 

    </div>

    <div class="modal fade hide" id="modal-form">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">×</button>
            <h3>Create new canistro store now!</h3>
        </div>
        <div class="modal-body">

            <div class="alert alert-block alert-success fade out hide">
                <button data-dismiss="alert" class="close" type="button">×</button>
                <h4 class="alert-heading">Thank you for creating your canistro!</h4>
                <p>We sent you an email with the activation link for your first login.</p>
            </div>

            <form class="form-horizontal" method="post">
                <fieldset>
                    <div class="control-group">
                        <label class="control-label" for="email">your email address</label>
                        <div class="controls">
                            <input type="text" name="email" id="email" class="span3" placeholder="renasboy@highlinux.com">
                            <p class="help-block">enter your email address here</p>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label" for="name">your canistro's name</label>
                        <div class="controls">
                            <div class="input-prepend">
                            <span class="add-on">canistro.com/</span><input type="text" class="span2" name="name" id="name" placeholder="renasboy">
                            </div>
                            <p class="help-block">enter your canistro's name here</p>
                        </div>
                    </div>
                </fieldset>
            </form>
        </div>
        <div class="modal-footer">
            <a href="#" class="btn" data-dismiss="modal">maybe later...</a>
            <a href="#" class="btn btn-primary" id="done">done!</a>
        </div>
    </div>

    <a href="https://github.com/renasboy/canistro" class="github"><img src="/img/fork-me-on-github.png" alt="fork canistro on github"></a>

</body>

</html>
